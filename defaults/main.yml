---
nginx_software: nginx #openresty #nginx

nginx_openresty_copy_lua_files: false
nginx_openresty_lua_config:
  - lua_package_path '~/lua/?.lua;;';
  - resolver 10.106.10.1;
  - lua_ssl_trusted_certificate /etc/ssl/certs/ca-certificates.crt;
  - lua_ssl_verify_depth 5;
  - '# cache for discovery metadata documents'
  -  lua_shared_dict discovery 1m;
  - '# cache for JWKs'
  - lua_shared_dict jwks 1m;

nginx_revproxy_sites:                                         # List of sites to reverse proxy
  example.com:                                                # Domain name
    client_max_body_size: "256M"
    proxy_read_timeout: "360"
    domains:                                                  # List of server_name aliases
      - example.com
      - www.example.com
    upstreams:                                                # List of Upstreams
      - {backend_address: 192.168.0.100, backend_port: 80}
      - {backend_address: 192.168.0.101, backend_port: 8080}
    ssl: true                                                 # Set to True if you want to redirect http to https
    hsts_max_age: 63072000                                    # Set HSTS header with max-age defined
    letsencrypt: false                                        # Set to True if you want use letsencrypt
    # conn_upgrade:
    # lua_action:


# Remove WebRoot Sites
nginx_revproxy_remove_webroot_sites: true

# De-activate Sites
nginx_revproxy_de_activate_sites: true

# Generate Certificates with Letsencrypt
# h2_certbot_certs: []

# Upload Custom Certificates from Vault
# h2_custom_cert_certiciate: []